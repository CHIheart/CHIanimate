define(function(require,i,e){return function(i,e,n,t,f){function o(i){return i&&$(i).size()}if(!o(i))return;if(!t)t={};if(!f)f={};if(!n)n={};function r(i){return i&&/^[\+]?[0]*[1-9][\d]*$/.test(i)}var u=new Object,c=$(i).eq(0),s=!e?c.children():c.find(e),d=s.size();if(d<2)return;var a=0,l=0,h=r(t.delay)?t.delay:3e3,p="mstop"in t?Boolean(t.mstop):true,q="auto"in t?t.auto:true,v=0;if(p)c.mouseenter(w).mouseleave(function(){if(q)m()});s.not(":first-of-type").hide();u.show=function(i){if(i==a||v)return;v=2;w();i+=d;i%=d;if(typeof x!=="undefined"){x.eq(a).removeClass("cur");x.eq(i).addClass("cur")}s.eq(i).fadeIn(function(){if(f.show)f.show(s.eq(i));v--;if(!v&&q)m()});s.eq(a).fadeOut(function(){if(f.hide)f.hide(s.eq(a));v--;if(!v&&q)m()});a=i};u.prev=function(){if(v)return;w();u.show(a-1)};u.next=function(){if(v)return;w();u.show(a+1)};function m(){if(!l)l=setTimeout(u.next,h)}u.on=function(){q=true;m()};function w(){clearTimeout(l);l=0}u.off=function(){q=false;w()};u.size=function(){return s.size()};if(o(n.indices)){var x=$(n.indices);x.eq(0).addClass("cur");x.click(function(){u.show($(this).index(n.indices))})}if(o(n.prev))$(n.prev).click(u.prev);if(o(n.next))$(n.next).click(u.next);if(o(n.stop))$(n.stop).click(u.off);if(o(n.start))$(n.start).click(u.on);if(q)u.on();if(f.init){f.init(s.eq(0))}return u}});