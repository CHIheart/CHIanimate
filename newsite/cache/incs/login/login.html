<!--Written by PROCESS.PHP at the time of 2016-04-14 18:56:47-->
<style>.LOGIN{background-color:#fff;width:600px;height:350px;margin-left:auto;margin-right:auto;overflow:hidden}.LOGIN button i.lcz{font-size:20px;position:relative;left:-2px}.LOGIN button i.lcz-heart{top:3px}.LOGIN button i.lcz-home2{top:2px}.LOGIN>*{float:left}.LOGIN .pic{margin:30px 20px 30px 10px}.LOGIN form,.LOGIN h6{width:280px}.LOGIN h6{font-size:24px;text-align:center;margin:50px 0 20px}.LOGIN .TEXTCONTAINER{margin:20px 16px}.LOGIN .TEXTS{width:100%}.LOGIN .BTNCONTAINER{margin-top:30px;font-size:0}.LOGIN .button-red{margin-right:8px}</style><!-- 即时登陆插件 -->

<table class="FullScreenPlugin">
	<tbody>
		<tr>
			<td>
				<div class="LOGIN" ng-controller="CtrlLogin">
					<div class="pic"><img src="http://www.new.com/srcs/images/elephant.png?813b46" alt=""></div>
					<h6>登陆乐车仔</h6>
					<form novalidate name="LoginForm" id="LoginForm">
						<div class="TEXTCONTAINER">
							<input ng-model="passport" name="passport" id="passport" ng-required="true" ng-pattern="/^[\w\d][\w\d\_\-]*(\@([\w\d][\w\d\-\_]+\.)+\w{2,})?$/i" class="ng-untouched TEXTS EMAILS" ng-class="judge('passport');" ng-focus="reference=true;" ng-value="123123">
							<label for="passport" class="LABELS">账号/手机/邮箱</label>
							<ul class="EMAILS" ng-show="hasAt() && reference;">
								<!-- <li ng-repeat="host in hosts | filter : afterAt()" ng-click="setEmail($index);">{{beforeAt()}}@{{host}}</li> -->
								<li ng-repeat="host in hosts" ng-mouseenter="setEmail2($index);" ng-click="drop2();">{{beforeAt()}}@{{host}}</li>
							</ul>
						</div>
						<div class="TEXTCONTAINER">
							<input ng-model="password" name="password" id="password" ng-required="true" ng-pattern="/^[\w\W]{6,}$/i" class="ng-untouched TEXTS" ng-class="judge('password');">
							<label for="password" class="LABELS">密码</label>
						</div>
						<div class="BTNCONTAINER">
							<button class="button button-large button-red" ng-click="login();" ng-disabled="LoginForm.passport.$invalid || LoginForm.password.$invalid || LoginForm.$invalid"><i class="lcz lcz-heart"></i>登陆</button>
							<button class="button button-large button-gray" ng-click="close();"><i class="lcz lcz-home2"></i>取消</button>
						</div>
					</form>
				</div>
			</td>
		</tr>
	</tbody>
</table>
<script>define("LOGIN",[],function(e,n,t){var o=$(".LOGIN"),s=o.closest(".FullScreenPlugin"),a,r;angular.module("Login",[]).controller("CtrlLogin",["$scope","$timeout",function(e,n){e.judge=function(e){return $("#"+e).val()?"ng-filled":"ng-empty"};e.open=function(){s.fadeIn()};e.close=function(){s.fadeOut();this.reset()};e.login=function(){$.ajax({url:"/ajax/header/login",type:"POST",dataType:"json",data:$("#LoginForm").serialize()}).success(function(n){if(n.result){e.reset();e.$apply();var t=angular.element(".TOPLINKS").scope();t.online=true;t.user=n.user;t.$apply();$(".TOPLINKS").children().css({visibility:"visible"});e.close()}else{var o=function(){a("登陆失败",n.message,"frown",function(){console.log(r);r(0,1)})},s=function(){var e=angular.element(".WINLIT").scope();a=e.alert;r=e.close};!$(".WINLIT").length?$.ajax({url:"/ajax/loadPlugin.php",type:"POST",dataType:"html",data:{plugin:"winlit"}}).done(function(e){$("body").append(e);s();o()}):(!a&&s(),o())}})};e.reset=function(){e.passport="";e.password="";var n=e.LoginForm;n.passport.$setPristine();n.password.$setPristine();$(".ng-touched",o).each(function(e,n){$(this).addClass("ng-untouched").removeClass("ng-touched").one("blur",function(e){$(this).removeClass("ng-untouched").addClass("ng-touched")})});e.reference=true};e.hasAt=function(){return passport.value.indexOf("@")>0};e.beforeAt=function(){var e=passport.value;return e.substring(0,e.indexOf("@"))};e.afterAt=function(){var e=passport.value;return e.substring(e.indexOf("@")+1)};e.setEmail=function(t){n(function(){e.passport=e.beforeAt()+"@"+e.hosts[t];e.reference=false},10)};e.setEmail2=function(t){n(function(){e.passport=e.beforeAt()+"@"+e.hosts[t]},10)};e.drop2=function(t){n(function(){e.reference=false},10)};e.hosts=["126.com","163.com","sina.com","yeah.net","qq.com","hotmail.com"];e.reference=true;console.log(e.passport)}]);angular.bootstrap(o,["Login"]);$(".ng-untouched",o).one("blur",function(e){$(this).removeClass("ng-untouched").addClass("ng-touched")});return});seajs.use("LOGIN");</script>